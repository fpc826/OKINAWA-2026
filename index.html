<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2025 by anonymous (http://jsbin.com/gavaqanoce/1/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>沖繩五日冬之旅 | Okinawa 2025</title>
    
    <!-- 載入 Tailwind CSS -->
    <script type="text/javascript" nonce="af1a00534e5947d28343aa42469" src="//local.adguard.org?ts=1765600314678&amp;type=content-script&amp;dmn=jsbin.com&amp;url=https%3A%2F%2Fjsbin.com%2Fdownload&amp;app=chrome.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script><script type="text/javascript" nonce="af1a00534e5947d28343aa42469" src="//local.adguard.org?ts=1765600314678&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script><script src="https://cdn.tailwindcss.com"></script>
    <!-- 載入字體：Noto Sans TC (現代感) 和 Shippori Mincho (日式優雅) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Shippori+Mincho:wght@400;600&display=swap" rel="stylesheet">
    <!-- 載入 Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* =========================================
           1. 自定義設定區 (長輩模式設定)
           請在此處修改數值以調整大小
           ========================================= */
        :root {
            /* --- 顏色設定 --- */
            --primary-color: #4A89A6; 
            --accent-color: #E88E98;
            --bg-color: #F7F5F0;
            --card-bg: #FFFFFF;
            --text-main: #333333;
            --text-sub: #666666;
            --line-color: #D1D5DB;

            /* --- 版面與字體大小設定 (可在此自由調整) --- */
            
            /* 時間軸圖示大小 (圓圈大小) - 建議 32px ~ 48px */
            --timeline-icon-size: 32px;
            
            /* 時間軸圖示內的圖案大小 */
            --timeline-icon-font-size: 14px;

            /* 行程標題字體大小 (例如: 美麗海水族館) */
            --title-font-size: 20px;

            /* 行程筆記(Note)字體大小 (長輩建議 16px 以上) */
            --note-font-size: 17px;

            /* 時間與地點小字的字體大小 */
            --meta-font-size: 14px;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            -webkit-font-smoothing: antialiased;
        }

        /* 日式明朝體用於標題 */
        h1, h2, h3, .serif-font {
            font-family: 'Shippori Mincho', serif;
        }

        /* 隱藏滾動條但保留功能 (App感) */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* 時間軸線條效果 (自動計算位置) */
        .timeline-line {
            position: absolute;
            /* 線條位置自動居中於圖示 (圖示寬度的一半) */
            left: calc(var(--timeline-icon-size) / 2);
            top: 40px;
            bottom: -20px;
            width: 2px;
            background-color: var(--line-color);
            z-index: 0;
            transform: translateX(-50%); /* 修正線條本身的寬度偏差 */
        }
        .last-item .timeline-line {
            display: none;
        }

        /* 頁籤選中狀態 */
        .tab-active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        .tab-inactive {
            background-color: white;
            color: var(--text-sub);
            border: 1px solid #e5e7eb;
        }

        /* 動畫效果 */
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
            opacity: 0;
            transform: translateY(10px);
        }
        @keyframes fadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

        /* 玻璃擬態導航按鈕 */
        .nav-btn {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(0,0,0,0.05);
            transition: all 0.2s;
        }
        .nav-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <!-- 頂部標頭 -->
    <header class="bg-white shadow-sm z-20 flex-none px-6 py-4 flex justify-between items-center">
        <div>
            <h1 class="text-xl font-bold text-[var(--primary-color)] tracking-widest">OKINAWA 2025</h1>
            <p class="text-xs text-[var(--text-sub)] mt-1">冬之沖繩・溫泉・五日自駕旅</p>
        </div>
        <div class="text-right">
             <span id="header-date" class="text-sm font-medium text-[var(--text-main)]">JAN 21 - 25</span>
        </div>
    </header>

    <!-- 導航頁籤 -->
    <nav class="bg-[var(--bg-color)] z-10 flex-none py-3 overflow-x-auto no-scrollbar px-4 border-b border-gray-200">
        <div class="flex space-x-3 min-w-max" id="tab-container">
            <!-- Tabs 將由 JavaScript 生成 -->
        </div>
    </nav>

    <main class="flex-1 flex overflow-hidden relative">
        
        <!-- 行程列表 (左側/手機全寬) -->
        <div class="w-full md:w-1/2 lg:w-5/12 overflow-y-auto no-scrollbar p-4 pb-24" id="itinerary-container">
            <!-- 行程內容將由 JavaScript 渲染 -->
        </div>

        <!-- 亮點 & 筆記 (右側/僅桌面顯示) -->
        <div class="hidden md:flex md:w-1/2 lg:w-7/12 bg-white border-l border-gray-100 flex-col relative h-full">
            <!-- 頂部標題/摘要區 (使用顏色底色) -->
            <div id="hero-color-area" class="h-1/3 w-full flex-none p-8 flex flex-col justify-end transition-colors duration-500 rounded-bl-xl bg-[var(--primary-color)]">
                <h2 id="hero-title" class="text-3xl font-bold serif-font mb-2 text-white">準備出發</h2>
                <p id="hero-desc" class="text-white text-sm leading-relaxed">享受南國的風與海，體驗獨特的琉球文化。</p>
            </div>
            <!-- 導遊筆記 -->
            <div class="h-2/3 p-8 overflow-y-auto bg-[var(--bg-color)] flex-1">
                <h3 class="text-lg font-bold text-[var(--primary-color)] mb-4 border-b pb-2 border-gray-300">本日亮點 & 導遊筆記</h3>
                <div id="guide-notes" class="prose text-[var(--text-sub)] text-sm space-y-4 leading-7">
                    <!-- 筆記內容將由 JavaScript 渲染 -->
                </div>
            </div>
        </div>
    </main>

    <script>
        // === 1. 資料庫 (從 Excel 轉換而來) ===
        // Note: 已經根據使用者要求，增加了行程的說明、特點、推薦名產。
        const itineraryData = [
            {
                day: "Day 1",
                date: "2025-01-21",
                title: "抵達沖繩・燒肉之夜",
                summary: "抵達那霸機場，取車後直接享受豐盛的燒肉晚餐，入住擁有美麗泳池的 Laguna Garden Hotel。",
                guideNotes: "<p>歡迎來到沖繩！第一天的重點在於順利取車與安頓。</p><ul><li><strong>取車提醒：</strong>租車接駁區通常在國內線航廈過馬路後的區域，請尋找 Times Car 的旗幟。</li><li><strong>燒肉王：</strong>這家是熱門吃到飽，建議依照預約時間準時抵達。</li><li><strong>住宿：</strong>Laguna Garden 位於宜野灣，房間寬敞，可利用飯店內的設施稍微放鬆。</li></ul>",
                activities: [
                    { 
                        time: "11:30", 
                        icon: "fa-plane-departure", 
                        title: "桃園機場 check in", 
                        location: "桃園機場第一航廈", 
                        note: "AirAisa亞洲航空<br>FD 230 (13:30 起飛 - 15:55 抵達)", 
                        link: "", 
                        type: "transport", 
                        image: "" 
                    },
                    { 
                        time: "13:30~15:55", 
                        icon: "fa-plane-arrival", 
                        title: "抵達那霸機場 (OKA)", 
                        location: "那霸機場", 
                        note: "13:30 起飛 - 15:55 抵達", 
                        link: "", 
                        type: "transport", 
                        image: "" 
                    },
                    { 
                        time: "16:50", 
                        icon: "fa-car", 
                        title: "取車 (Times Car Rental)", 
                        location: "Times car rental 那霸空港店", 
                        note: "車型：HONDA FREED or TOYOTA SIENTA。<br>MapCode: 33 124 756*27。", 
                        link: "https://www.timescar-rental.com/zh_hk/okinawa/shop/4701/", 
                        mapCode: "33 124 756*27", 
                        image: "" 
                    },
                    { 
                        time: "17:30", 
                        icon: "fa-utensils", 
                        title: "晚餐：燒肉吃到飽", 
                        location: "焼肉きんぐ 那覇新都心店", 
                        note: "大口吃肉，補充體力！", 
                        link: "https://www.yakiniku-king.jp/menu_all/", 
                        mapCode: "", 
                        image: "" 
                    },
                    { 
                        time: "20:00", 
                        icon: "fa-bed", 
                        title: "住宿：Laguna Garden", 
                        location: "Laguna Garden Hotel Okinawa", 
                        note: "房型：Twin Moderate Room。<br>MapCode: 33 403 174*32。", 
                        link: "https://www.laguna-garden.jp/", 
                        mapCode: "33 403 174*32", 
                        image: "" 
                    }
                ]
            },
            {
                day: "Day 2",
                date: "2025-01-22",
                title: "絕景萬座毛・早春櫻花",
                heroImage: "https://images.unsplash.com/photo-1627918578500-1c05d7b56a93?q=80&w=2072&auto=format&fit=crop", 
                summary: "一路向北！欣賞經典的象鼻岩萬座毛，跨越絕美古宇利大橋，並在八重岳感受早春的寒緋櫻。",
                guideNotes: "<p>今天將會看到沖繩最經典的『藍』。</p><ul><li><strong>萬座毛：</strong>那個像象鼻的珊瑚礁懸崖是必拍景點，別忘了買個『沙翁』當點心。</li><li><strong>古宇利大橋：</strong>開車在橋上有如在海上飛行，橋下的沙灘很適合踩水。</li><li><strong>大家 Ufuya：</strong>在百年古宅中吃阿古豬麵，氣氛滿分。</li><li><strong>八重岳櫻花：</strong>沖繩的櫻花是深粉紅色的『寒緋櫻』，與日本本島不同，是一月限定的景色。</li></ul>",
                activities: [
                    { 
                        time: "上午", 
                        icon: "fa-coffee", 
                        title: "飯店早餐", 
                        location: "Laguna Garden Hotel", 
                        note: "PASEO GARDEN 西式自助早餐。", 
                        link: "https://www.laguna-garden.jp/restaurants/paseo.php", 
                        type: "food", 
                        image: "" 
                    },
                    { 
                        time: "上午", 
                        icon: "fa-camera", 
                        title: "萬座毛", 
                        location: "萬座毛", 
                        note: "欣賞象鼻岩懸崖的壯闊景色，停留約30分鐘。<br>推薦：三矢本舖-沙翁 (Sata Andagi, 沖繩傳統甜甜圈)。<br>MapCode: 206 312 039*17。", 
                        link: "https://www.manzamo.jp/", 
                        mapCode: "206 312 039*17", 
                        image: "" 
                    },
                    { 
                        time: "上午", 
                        icon: "fa-bridge-water", 
                        title: "古宇利大橋", 
                        location: "古宇利大橋觀景平台", 
                        note: "這座橋連結了古宇利島與屋我地島，景色極美。<br>MapCode: 485 601 892*33", 
                        link: "", 
                        mapCode: "485 601 892*33", 
                        image: "" 
                    },
                    { 
                        time: "11-14", 
                        icon: "fa-bowl-food", 
                        title: "午餐：百年古家 大家", 
                        location: "百年古家 大家", 
                        note: "在超過百年的琉球古宅內用餐，環境古樸優雅。<br>MapCode: 206 745 056*82", 
                        link: "https://ufuya.com/lunch.html", 
                        mapCode: "206 745 056*82", 
                        image: "" 
                    },
                    { 
                        time: "下午", 
                        icon: "fa-tree", 
                        title: "沖繩櫻花祭", 
                        location: "八重岳櫻之森公園", 
                        note: "沖繩是日本最早開櫻花的地方！<br>深粉紅色的『寒緋櫻』，花期約在1月中下旬，若遇盛開非常壯觀。<br>MapCode: 206 830 214*22", 
                        link: "https://www.gltjp.com/zh-hant/directory/item/15554/", 
                        mapCode: "206 830 214*22", 
                        image: "" 
                    },
                    { 
                        time: "晚上", 
                        icon: "fa-bed", 
                        title: "住宿：馬海納健康度假酒店", 
                        location: "Hotel Mahaina Wellness Resort Okinawa", 
                        note: "房型：Standard Family Room (+和室)。", 
                        link: "https://www.mahaina.co.jp/", 
                        mapCode: "553 046 395*47", 
                        image: "" 
                    },
                    { 
                        time: "晚上", 
                        icon: "fa-burger", 
                        title: "晚餐：ポーたま Potama 飯糰", 
                        location: "ポーたま 沖縄本部町店", 
                        note: "沖繩B級美食之王！<br>推薦：經典苦瓜豬肉蛋飯糰、島豆腐飯糰、招牌炸蝦塔塔飯糰。可以外帶回飯店，邊看電視邊享用。<br>MapCode: 553 075 798*23", 
                        link: "https://porktamago.com/", 
                        mapCode: "553 075 798*23", 
                        image: "" 
                    }
                ]
            },
            {
                day: "Day 3",
                date: "2025-01-23",
                title: "黑潮之海・美國村",
                heroImage: "https://images.unsplash.com/photo-1571216685799-a54862599298?q=80&w=2070&auto=format&fit=crop", 
                summary: "探訪世界級的美麗海水族館，被巨大的鯨鯊震撼，下午往南移動至充滿異國風情的美國村。",
                guideNotes: "<p>今日是視覺的饗宴。</p><ul><li><strong>美麗海水族館：</strong>一定要在『黑潮之海』大水槽前發呆一陣子。</li><li><strong>許田休息站：</strong>這是傳說中最好買的休息站，必買只有這裡才有的限定巧克力麻糬蛋糕(聖倫推薦買五盒!)、咖啡豆、黑糖。</li><li><strong>美國村：</strong>晚上的氣氛比白天更好，燈光美氣氛佳，沿著海堤散步非常浪漫。</li></ul>",
                activities: [
                     { 
                        time: "上午", 
                        icon: "fa-coffee", 
                        title: "飯店早餐", 
                        location: "Hotel Mahaina Wellness Resort Okinawa", 
                        note: "西式自助早餐。", 
                        link: "https://www.mahaina.co.jp/restaurants/breakfast/", 
                        type: "food", 
                        image: "" 
                    },
                     { 
                        time: "上午", 
                        icon: "fa-fish", 
                        title: "美麗海水族館", 
                        location: "沖繩美麗海水族館", 
                        note: "停車請停 P7 立體停車場最方便。<br>全世界最大的水槽之一『黑潮之海』，有三隻巨大的鯨鯊和鬼蝠魟。鯨鯊娃娃是經典必買(抽)紀念品！<br>【強烈推薦】9:40~10:00的海豚餵食體驗<br>MapCode: 553 075 797", 
                        link: "https://churaumi.okinawa/", 
                        mapCode: "553 075 797",
                        image: "image/DAY3_2.png" 
                    },
                    { 
                        time: "下午", 
                        icon: "fa-store", 
                        title: "許田休息站", 
                        location: "道の駅許田", 
                        note: "沖繩人氣第一的公路休息站。<br>【特產推薦】：當地產的黑糖製品、咖啡豆以及聖倫極力推薦買五盒(?)的巧克力麻糬蛋糕。<br>MapCode: 206 476 708*78", 
                        link: "https://www.yanbaru-b.co.jp/", 
                        mapCode: "206 476 708*78", 
                        image: "" 
                    },
                    { 
                        time: "晚上", 
                        icon: "fa-bed", 
                        title: "住宿：Vessel Hotel Campana", 
                        location: "Vessel Hotel Campana Okinawa", 
                        note: "房型：Ocean View Standard Room - Annex Building<br>位於美國村旁，位置極佳。<br>無敵海景大浴場，可以邊泡湯邊看著東海岸線，非常享受。", 
                        link: "https://www.vessel-hotel.jp/campana/okinawa/", 
                        mapCode: "33 525 322*52", 
                        image: "" 
                    },
                    { 
                        time: "晚上", 
                        icon: "fa-fire-burner", 
                        title: "晚餐：阿古豬隱家", 
                        location: "阿古豬隱家 北谷店", 
                        note: "專門提供高品質的阿古豬涮涮鍋。<br>阿古豬肉質鮮甜，油脂熔點低，一定要試試涮煮後搭配特製醬汁。<br>MapCode: 33 525 143*82", 
                        link: "", 
                        mapCode: "33 525 143*82", 
                        image: "" 
                    },
                    { 
                        time: "晚上", 
                        icon: "fa-bag-shopping", 
                        title: "美國村逛街", 
                        location: "美國村", 
                        note: "充滿美式與日式融合的異國風情。<br>推薦在日落時分到海堤上散步，看著摩天輪的燈光亮起，氣氛絕佳。有許多個性小店可逛。", 
                        link: "", 
                        type: "leisure", 
                        image: "" 
                    }
                ]
            },
            {
                day: "Day 4",
                date: "2025-01-24",
                title: "波上宮參拜・出海賞鯨",
                heroImage: "https://images.unsplash.com/photo-1545642454-e053d2745a33?q=80&w=1974&auto=format&fit=crop", 
                summary: "參拜建在懸崖上的波上宮，下午參加冬季限定的賞鯨活動，與海洋巨獸近距離接觸。",
                guideNotes: "<p>沖繩的冬天是鯨魚的季節！</p><ul><li><strong>波上宮：</strong>沖繩八社之首，從旁邊的波之上海灘往上看，可以看到神社屹立在懸崖上的絕景。</li><li><strong>賞鯨：</strong>請務必在開船前 30 分鐘服用暈船藥。座頭鯨躍出水面的瞬間非常震撼，請準備好相機。</li><li><strong>Loisir Hotel：</strong>這間飯店擁有那霸市區少見的天然溫泉，賞鯨回來後泡湯最舒服。</li></ul>",
                activities: [
                    { 
                        time: "上午", 
                        icon: "fa-coffee", 
                        title: "飯店早餐", 
                        location: "Vessel Hotel Campana Okinawa", 
                        note: "西式自助早餐。", 
                        link: "https://www.vessel-hotel.jp/campana/okinawa/breakfast/", 
                        type: "food", 
                        image: "" 
                    },
                    { 
                        time: "上午", 
                        icon: "fa-torii-gate", 
                        title: "波上宮", 
                        location: "波上宮", 
                        note: "沖繩八社之首，是唯一建在懸崖邊的神社。<br>可從旁邊的『波之上海灘』欣賞神社全景，非常壯觀。<br>記得求個平安符或御朱印。<br>MapCode: 33 185 022*00", 
                        link: "https://okinawa.letsgojp.com/archives/757433/", 
                        mapCode: "33 185 022*00", 
                        image: "" 
                    },
                    { 
                        time: "下午", 
                        icon: "fa-water", 
                        title: "賞鯨體驗", 
                        location: "那霸三重港", 
                        note: "Marine Club Berry<br>【特點】冬季限定 (1~3月)，觀賞座頭鯨洄游到沖繩繁殖，看到機率高達95%以上。<br>請務必穿上最暖和的防風外套，並建議提前吃暈船藥。<br>MapCode: 33 246 627*42", 
                        link: "https://www.berry7.com/lang/zh-TW/wwblog", 
                        mapCode: "33 246 627*42", 
                        image: "" 
                    },
                    { 
                        time: "晚上", 
                        icon: "fa-bed", 
                        title: "住宿：LOISIR SPA TOWER NAHA", 
                        location: "LOISIR SPA TOWER NAHA", 
                        note: "房型：SUPERIOR TWIN。<br>這是那霸市區少數擁有『天然溫泉』的飯店，賞鯨回來後可以好好泡湯消除疲勞。", 
                        link: "https://www.loisir-naha.com/spatower/", 
                        mapCode: "33 155 123*44", 
                        image: "" 
                    },
                    { 
                        time: "晚上", 
                        icon: "fa-utensils", 
                        title: "晚餐：飯店自助餐", 
                        location: "LOISIR SPA TOWER NAHA", 
                        note: "飯店內享用豐盛自助晚餐，多樣化的日式、西式與琉球傳統料理，適合不願再舟車勞頓的夜晚。", 
                        link: "https://www.loisir-naha.com/restaurant/menu/220/", 
                        image: "" 
                    }
                ]
            },
            {
                day: "Day 5",
                date: "2025-01-25",
                title: "國際通購物・瀨長島・返家",
                heroImage: "https://images.unsplash.com/photo-1563274296-681b953d5272?q=80&w=2070&auto=format&fit=crop", 
                summary: "最後一天在國際通大採購，到瀨長島看飛機起降作為完美句點，帶著滿滿回憶前往機場。",
                guideNotes: "<p>把握最後的採購時光！</p><ul><li><strong>國際通：</strong>御菓子御殿的紅芋塔、Calbee+ 的現炸薯條是必買必吃。如果想買伴手禮，『唐吉訶德』也在這裡。</li><li><strong>A&W漢堡：</strong>沖繩限定的美式速食，Root Beer (麥根沙士) 口味獨特，像貼布的味道，但值得一試！</li><li><strong>瀨長島：</strong>純白色的階梯狀建築有『小希臘』之稱，這裡距離機場很近，飛機起降就在頭頂，非常壯觀。</li></ul>",
                activities: [
                    { 
                        time: "上午", 
                        icon: "fa-coffee", 
                        title: "飯店早餐", 
                        location: "LOISIR SPA TOWER NAHA", 
                        note: "西式自助早餐。", 
                        link: "https://www.loisir-naha.com/spatower/breakfast/", 
                        type: "food", 
                        image: "" 
                    },
                    { 
                        time: "中午", 
                        icon: "fa-bag-shopping", 
                        title: "國際通 逛街/名產", 
                        location: "那霸國際通", 
                        note: "國際通是沖繩最繁華的街道，一次買齊所有伴手禮。<br>【必買推薦】御菓子御殿紅芋塔、鹽屋雪鹽冰淇淋、Fukugiya福木屋年輪蛋糕、35 COFFEE（用珊瑚烘焙的咖啡）。<br>MapCode: 33 158 572*71", 
                        link: "https://ppt.cc/faDLDx", 
                        mapCode: "33 158 572*71",
                        additionalLinks: [
                            { text: "名產推薦", url: "https://bobbyfun.tw/2024-01-08-2708/" }
                        ],
                        image: ""
                    },
                    { 
                        time: "下午", 
                        icon: "fa-burger", 
                        title: "午餐：A&W漢堡", 
                        location: "A&W 國際通店", 
                        note: "沖繩限定的美式速食店。<br>推薦：招牌A&W Burger、香甜的螺旋薯圈，以及使用約14種以上草本植物製成的無酒精飲料的Root Beer(麥根沙士)。", 
                        link: "https://www.tylinnetravel.tw/awrestaurants-okinawa/", 
                        image: "" 
                    },
                    { 
                        time: "下午", 
                        icon: "fa-plane", 
                        title: "瀨長島 Umikaji Terrace", 
                        location: "瀨長島", 
                        note: "純白色的階梯式商場，有『小希臘』美稱。<br>距離機場最近的離島，可以近距離觀看飛機起降。<br>MapCode: 33 002 602*22", 
                        link: "https://okinawa.letsgojp.com/archives/405500/", 
                        mapCode: "33 002 602*22", 
                        image: "" 
                    },
                    { 
                        time: "16:00", 
                        icon: "fa-car", 
                        title: "還車", 
                        location: "Times car rental 那霸空港店", 
                        note: "請務必在還車前到機場附近的加油站*加滿油* (滿油還車)。<br>MapCode: 33 124 756*27", 
                        link: "https://www.timescar-rental.com/zh_hk/okinawa/shop/4701/", 
                        mapCode: "33 124 756*27", 
                        image: "" 
                    },
                    { 
                        time: "16:40", 
                        icon: "fa-passport", 
                        title: "那霸機場 Check in", 
                        location: "那霸機場", 
                        note: "國際線航廈辦理登機手續。機票代碼: R5M5FC", 
                        link: "", 
                        image: "" 
                    },
                    { 
                        time: "18:40", 
                        icon: "fa-plane-departure", 
                        title: "飛往台灣", 
                        location: "台灣虎航 IT233", 
                        note: "18:40 起飛 - 19:20 抵達桃園。", 
                        link: "", 
                        image: "" 
                    }
                ]
            },
            {
                day: "Info",
                date: "重要資訊",
                title: "行前準備 & 重要連結",
                heroImage: "https://images.unsplash.com/photo-1492571350019-22de08371fd3?q=80&w=1953&auto=format&fit=crop",
                summary: "這裡彙整了您的租車資訊、機票代碼以及地圖連結。",
                guideNotes: "<p><strong>緊急聯絡：</strong><br>遇到事故請先報警 (110) 並聯絡租車公司。<br><strong>天氣穿搭：</strong><br>1月的沖繩均溫約 17-20度，海風大，建議穿著薄長袖並帶一件**防風外套**。白天若出太陽會較溫暖。</p><p><strong>Map Code 使用：</strong><br>沖繩自駕主要使用 Map Code 導航，輸入地圖代碼比輸入地址更精準快速。</p>",
                activities: [
                    { time: "機票", icon: "fa-ticket", title: "去程：AirAsia FD230", location: "TPE 13:30 -> OKA 15:55", note: "代碼：QFHR7K", link: "", image: "" },
                    { time: "租車", icon: "fa-car", title: "Times Car Rental", location: "那霸空港店", note: "33 124 756*27", link: "https://www.timescar-rental.com/zh_hk/okinawa/shop/4701/", image: "" },
                    { time: "機票", icon: "fa-ticket", title: "回程：TigerAir IT233", location: "OKA 18:40 -> TPE 19:20", note: "代碼：R5M5FC", link: "", image: "" },
                ]
            }
        ];

        // === 2. 核心功能 (未修改，保留了長輩模式的字體控制) ===

        const tabContainer = document.getElementById('tab-container');
        const itineraryContainer = document.getElementById('itinerary-container');
        const heroTitle = document.getElementById('hero-title');
        const heroDesc = document.getElementById('hero-desc');
        const guideNotes = document.getElementById('guide-notes');
        const headerDate = document.getElementById('header-date');

        // 地點經緯度對照表 (用於查詢真實天氣)
        // 為了避免過度請求，我們將主要地點歸類
        const locationCoords = {
            "default": { lat: 26.2124, lon: 127.6809 }, // 那霸
            "桃園機場": { lat: 25.0797, lon: 121.2342 },
            "那霸機場": { lat: 26.2048, lon: 127.6458 },
            "燒肉きんぐ": { lat: 26.2295, lon: 127.6970 },
            "Laguna Garden": { lat: 26.2747, lon: 127.7345 },
            "萬座毛": { lat: 26.5050, lon: 127.8509 },
            "古宇利大橋": { lat: 26.6944, lon: 128.0229 },
            "百年古家": { lat: 26.6263, lon: 127.9669 },
            "八重岳櫻之森公園": { lat: 26.6637, lon: 127.9288 },
            "馬海納": { lat: 26.6917, lon: 127.8778 },
            "美麗海水族館": { lat: 26.6943, lon: 127.8779 },
            "道の駅許田": { lat: 26.5218, lon: 127.9649 },
            "Vessel Hotel": { lat: 26.3168, lon: 127.7570 },
            "美國村": { lat: 26.3168, lon: 127.7570 },
            "波上宮": { lat: 26.2206, lon: 127.6713 },
            "賞鯨": { lat: 26.2265, lon: 127.6748 }, // 那霸港
            "LOISIR": { lat: 26.2201, lon: 127.6669 },
            "國際通": { lat: 26.2163, lon: 127.6934 },
            "瀨長島": { lat: 26.1764, lon: 127.6435 }
        };

        function getCoords(locationName) {
            for (const key in locationCoords) {
                if (locationName.includes(key)) {
                    return locationCoords[key];
                }
            }
            return locationCoords["default"];
        }

        // 使用 Open-Meteo API (包含日本氣象廳 JMA 資料源)
        async function fetchRealWeather(locationName, elementId) {
            const coords = getCoords(locationName);
            const url = `https://api.open-meteo.com/v1/forecast?latitude=${coords.lat}&longitude=${coords.lon}&current=temperature_2m,weather_code,is_day&timezone=Asia%2FTokyo`;

            try {
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.current) {
                    const code = data.current.weather_code;
                    const temp = Math.round(data.current.temperature_2m);
                    const isDay = data.current.is_day;
                    const weatherInfo = getWeatherIconAndText(code, isDay);
                    
                    const el = document.getElementById(elementId);
                    if (el) {
                        el.innerHTML = `<i class="fa-solid ${weatherInfo.icon} ${weatherInfo.color}"></i> ${temp}°C ${weatherInfo.text}`;
                    }
                }
            } catch (error) {
                console.error("Weather fetch failed", error);
                const el = document.getElementById(elementId);
                if (el) el.innerText = "無法取得天氣";
            }
        }

        // WMO Weather Codes 轉換表
        function getWeatherIconAndText(code, isDay) {
            // 0: Clear sky
            if (code === 0) return { icon: isDay ? "fa-sun" : "fa-moon", text: "晴朗", color: "text-orange-400" };
            // 1, 2, 3: Mainly clear, partly cloudy, and overcast
            if (code === 1) return { icon: isDay ? "fa-cloud-sun" : "fa-cloud-moon", text: "多雲", color: "text-orange-300" };
            if (code === 2) return { icon: "fa-cloud", text: "陰天", color: "text-gray-400" };
            if (code === 3) return { icon: "fa-cloud", text: "陰天", color: "text-gray-500" };
            // 45, 48: Fog
            if (code === 45 || code === 48) return { icon: "fa-smog", text: "起霧", color: "text-gray-400" };
            // 51-55: Drizzle, 61-65: Rain, 80-82: Showers
            if (code >= 51 && code <= 67) return { icon: "fa-umbrella", text: "下雨", color: "text-blue-400" };
            if (code >= 80 && code <= 82) return { icon: "fa-cloud-showers-heavy", text: "陣雨", color: "text-blue-500" };
            // 71-77: Snow (沖繩機率極低但列出)
            if (code >= 71 && code <= 77) return { icon: "fa-snowflake", text: "下雪", color: "text-blue-200" };
            // 95+: Thunderstorm
            if (code >= 95) return { icon: "fa-bolt", text: "雷雨", color: "text-yellow-500" };
            
            return { icon: "fa-cloud", text: "多雲", color: "text-gray-400" };
        }

        function renderTabs() {
            tabContainer.innerHTML = '';
            itineraryData.forEach((item, index) => {
                const btn = document.createElement('button');
                btn.className = `px-5 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all duration-300 ${index === 0 ? 'tab-active' : 'tab-inactive'}`;
                btn.innerText = item.day;
                btn.onclick = () => switchTab(index);
                tabContainer.appendChild(btn);
            });
        }

        function switchTab(index) {
            // 更新 Tabs 樣式
            const tabs = tabContainer.children;
            for (let i = 0; i < tabs.length; i++) {
                if (i === index) {
                    tabs[i].classList.add('tab-active');
                    tabs[i].classList.remove('tab-inactive');
                } else {
                    tabs[i].classList.add('tab-inactive');
                    tabs[i].classList.remove('tab-active');
                }
            }

            // 更新內容
            renderItinerary(index);
            updateHero(index);
            
            // 滾動回頂部
            itineraryContainer.scrollTop = 0;
        }

        function renderItinerary(index) {
    const dayData = itineraryData[index];
    headerDate.innerText = dayData.date === "重要資訊" ? "INFO" : dayData.date;
    
    let html = '';

    // 標題區塊 (手機版顯示 Hero 資訊)
    html += `
        <div class="mb-6 fade-in">
            <h2 class="text-2xl font-bold text-[var(--primary-color)] serif-font">${dayData.title}</h2>
            <p class="text-[var(--text-sub)] text-sm mt-1">${dayData.summary}</p>
            <div class="md:hidden mt-4 p-4 bg-blue-50 rounded-xl text-sm text-gray-700">
                <p class="font-bold mb-1"><i class="fa-solid fa-circle-info mr-1"></i> 導遊筆記</p>
                ${dayData.guideNotes}
            </div>
        </div>
    `;

    // 行程列表
    if (dayData.activities) {
        html += '<div class="relative space-y-6 pl-2">'; // Timeline container
        
        dayData.activities.forEach((activity, idx) => {
            const isLast = idx === dayData.activities.length - 1;
            
            // 產生唯一的 ID 用於非同步更新天氣
            const weatherId = `weather-${index}-${idx}`;
            
            // 導航連結 (使用 Google Maps 搜尋地點名)
            let mapUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(activity.location)}`;
            
            // --- 圖片渲染邏輯 (已更新) ---
            // 檢查 activity.images (新陣列屬性) 是否存在且有內容
            const imageHtml = activity.images && activity.images.length > 0
                ? `<div class="flex flex-wrap gap-2 mb-4">
                    ${activity.images.map(imagePath => `
                        <div class="flex-1 min-w-[45%] overflow-hidden rounded-lg shadow-sm border border-gray-100">
                            <img src="${imagePath}" class="w-full h-auto object-cover aspect-[4/3]" alt="${activity.title} Image">
                        </div>
                    `).join('')}
                   </div>`
                : '';
            // -----------------------------

            html += `
                <div class="relative flex gap-4 fade-in ${isLast ? 'last-item' : ''}" style="animation-delay: ${idx * 0.1}s">
                    <div class="flex flex-col items-center">
                        <!-- 時間軸圓點 -->
                        <div class="rounded-full bg-white border-2 border-[var(--accent-color)] flex items-center justify-center text-[var(--accent-color)] shadow-sm z-10 shrink-0"
                            style="width: var(--timeline-icon-size); height: var(--timeline-icon-size); font-size: var(--timeline-icon-font-size);">
                            <i class="fa-solid ${activity.icon}"></i>
                        </div>
                        <!-- 時間軸線 -->
                        <div class="timeline-line"></div>
                    </div>

                    <!-- 行程卡片 -->
                    <div class="flex-1 bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow relative overflow-hidden group">
                        
                        <!-- 天氣資訊 (初始顯示載入中) -->
                        <div id="${weatherId}" class="absolute top-4 right-4 text-xs font-medium flex items-center gap-1 bg-gray-50 px-2 py-1 rounded-md text-gray-400">
                            <i class="fa-solid fa-circle-notch fa-spin"></i> 載入中...
                        </div>

                        <div class="font-bold text-[var(--primary-color)] mb-1 tracking-wide uppercase" style="font-size: var(--meta-font-size);">${activity.time}</div>
                        <h3 class="font-bold text-[var(--text-main)] mb-1" style="font-size: var(--title-font-size);">${activity.title}</h3>
                        <p class="text-[var(--text-sub)] flex items-center gap-1 mb-3" style="font-size: var(--meta-font-size);">
                            <i class="fa-solid fa-location-dot text-gray-400 text-xs"></i> ${activity.location}
                        </p>
                        
                        <!-- 詳細備註 -->
                        <div class="text-gray-600 mb-4 leading-relaxed p-3 border-l-2 border-gray-200 bg-gray-50/50 rounded-r-lg" style="font-size: var(--note-font-size); line-height: 1.6;">
                            ${activity.note}
                        </div>

                        <!-- 圖片顯示區塊 (使用新的 imageHtml 變數) -->
                        ${imageHtml}

                        <!-- 動作按鈕 (Flex wrap 支援多按鈕) -->
                        <div class="flex flex-wrap gap-2 mt-auto">
                            <a href="${mapUrl}" target="_blank" class="nav-btn px-4 py-2 rounded-lg text-center font-medium text-gray-700 flex items-center justify-center gap-2 hover:bg-gray-50 flex-grow" style="font-size: var(--meta-font-size);">
                                <i class="fa-solid fa-location-arrow text-[var(--primary-color)]"></i> 導航
                            </a>
                            
                            ${activity.link ? `
                            <a href="${activity.link}" target="_blank" class="nav-btn w-10 py-2 rounded-lg text-center text-gray-500 flex items-center justify-center hover:bg-gray-50" title="相關連結">
                                <i class="fa-solid fa-link"></i>
                            </a>` : ''}

                            <!-- 顯示額外文字連結 -->
                            ${activity.additionalLinks ? activity.additionalLinks.map(link => `
                            <a href="${link.url}" target="_blank" class="nav-btn px-3 py-2 rounded-lg text-center font-medium text-gray-600 flex items-center justify-center gap-1 hover:bg-gray-50" style="font-size: var(--meta-font-size);">
                                <i class="fa-solid fa-up-right-from-square text-xs"></i> ${link.text}
                            </a>
                            `).join('') : ''}
                        </div>
                    </div>
                </div>
            `;
            
            // 呼叫真實天氣 API
            setTimeout(() => {
                fetchRealWeather(activity.location, weatherId);
            }, idx * 100);
        });
        html += '</div>';
    }

    itineraryContainer.innerHTML = html;
}

    </script>
</body>
</html>
